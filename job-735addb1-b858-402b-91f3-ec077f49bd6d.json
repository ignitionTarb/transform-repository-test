{
  "id" : "735addb1-b858-402b-91f3-ec077f49bd6d",
  "name" : "Demo Aptos Pricing to Commerce Cloud",
  "enabled" : false,
  "tasks" : [ {
    "id" : "c9307046-253f-4c1d-ae19-291b496cf87a",
    "ordinal" : 1,
    "taskParameters" : [ {
      "id" : "498d9348-d5f4-41c2-a2ab-0737cd486628",
      "ordinal" : 1,
      "value" : "Test Client",
      "desc" : "Node to target",
      "name" : "node",
      "valueType" : 3,
      "secret" : false,
      "refId" : "b0b883bb-8c3d-439d-ad3c-f09a4bfe11c3"
    }, {
      "id" : "8bd8d803-daa4-4311-99f4-8e187d94feb5",
      "ordinal" : 2,
      "value" : "/home/ftpuser/ignition/input/tnode/^aptos-products.xml$",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "49bfed33-b7ba-4fff-800c-03492846fcba"
    }, {
      "id" : "15df6d6c-293f-4d3b-a2ea-6c6276d0a089",
      "ordinal" : 3,
      "value" : "",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "a369a683-6183-4d0e-88e7-f39e79bbaca1"
    }, {
      "id" : "2a76d9ea-4ddc-46cb-b32b-b105fae0225f",
      "ordinal" : 4,
      "value" : "",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "d35b10ba-da27-436a-af85-1ecc45413347"
    }, {
      "id" : "1257b4f6-659e-4690-962b-77fa69848350",
      "ordinal" : 5,
      "value" : "AptosPricingFile",
      "desc" : "Output Key",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "958d3cc1-9f65-4a33-82f1-7b56f4fb0a97"
    } ],
    "jobId" : "735addb1-b858-402b-91f3-ec077f49bd6d",
    "name" : "Remote file to map task",
    "key" : "Core::NodeFileToMapTask",
    "comment" : "pickup file from node",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.NodeFileToMapTask",
    "enabled" : true,
    "desc" : "Copy file from remote to map.",
    "refId" : "4c4b17e1-3904-473c-8784-0b53212ad251",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "b0e1c26f-e6fa-43bd-97eb-f883abf6b123",
    "ordinal" : 2,
    "taskParameters" : [ {
      "id" : "c4dd2784-0573-4447-9941-da8a7edf0328",
      "ordinal" : 1,
      "value" : "ftpuser",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "4f75fa01-c582-49aa-8f20-1b48462a8b28"
    }, {
      "id" : "60db4738-8f2e-4527-9d46-8f73485d8e00",
      "ordinal" : 2,
      "value" : "Cb6noRl93L3xieH1vfPSaA==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "48fbf631-e014-45ee-a8eb-298ac7d1fa21"
    }, {
      "id" : "90358e9a-b0b1-4005-8ec8-643a3d10a0ea",
      "ordinal" : 3,
      "value" : "ftps://demo.ignitiontransform.com/ignition/input/tnode/aptos-products.xml",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "45c250b3-72b5-4d81-a392-6ab7c6f5709d"
    }, {
      "id" : "db26fbaa-a085-47b0-a489-ddf44bf194b3",
      "ordinal" : 4,
      "value" : "AptosPricingFile",
      "desc" : "Key name of output file",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "201b77ea-8e35-4c3c-9f45-dd8afc123e10"
    } ],
    "jobId" : "735addb1-b858-402b-91f3-ec077f49bd6d",
    "name" : "Download File to Map Task",
    "key" : "Core::DownloadFileToMapTask",
    "comment" : "download file from ftps (debug)",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.DownloadFileToMapTask",
    "enabled" : false,
    "desc" : "Task used to download a file from FTP,SFTP,FTPS,Local and S3.",
    "refId" : "84211b05-40ce-4939-874d-825b983c3bda",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "997171b5-156d-4ce2-b05c-5a2521729c78",
    "ordinal" : 3,
    "taskParameters" : [ {
      "id" : "aff14978-a195-43ff-ae7f-2767ffb86740",
      "ordinal" : 1,
      "value" : "AptosPricingFile",
      "desc" : "Key name of input file\n",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "33b71961-09fb-4f69-9df8-46721a14b8a4"
    }, {
      "id" : "d33f23bf-f4bf-42b3-800d-780680509435",
      "ordinal" : 2,
      "value" : "AptosPricingMap",
      "desc" : "Key name to hold return value in dictionary",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "f1628808-0116-4d32-bff0-af0cb53d06b2"
    }, {
      "id" : "b996ad01-485f-4dbf-a34e-ee3e92fd89ee",
      "ordinal" : 4,
      "value" : "/Products/Product",
      "desc" : "Node to Break the row on",
      "name" : "rowIndicator",
      "valueType" : 0,
      "secret" : false,
      "refId" : "be88cc2e-5ba9-4277-a484-1d8146b78565"
    } ],
    "jobId" : "735addb1-b858-402b-91f3-ec077f49bd6d",
    "name" : "XML to Map Task",
    "key" : "Core::XmlToMapTask",
    "comment" : "get into map",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.XmlToMapTask",
    "enabled" : true,
    "desc" : "Task used to read xml file into the dictionary",
    "refId" : "4ca3d6e5-23fc-4d6a-beb2-09f0c9a5c2f3",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "a7e98caa-96da-4fb2-bceb-1c45f96fbdfa",
    "ordinal" : 4,
    "taskParameters" : [ {
      "id" : "74b3b11c-428e-4edb-a6b4-c75c9859e8fd",
      "ordinal" : 1,
      "value" : "var root = new java.util.HashMap();\nvar pricebooks = new java.util.ArrayList();\nvar pricebook = new java.util.HashMap();\npricebook.put(\"priceBookId\", \"listPrices\");\npricebook.put(\"currency\", \"USD\");\npricebook.put(\"onlineFlag\", \"true\");\nvar pricerecords = new java.util.ArrayList();\nvar sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss\");\n\nvar pricingIterator = new com.ignitioncommerce.transform.util.MapInFileIterator(dict.get('AptosPricingMap'));\nwhile (pricingIterator.hasNext()) {\n  var pricingRecord = pricingIterator.next();\n  var record = new java.util.HashMap();\n  record.put(\"productId\", pricingRecord.ProductID);\n  record.put(\"onlineFrom\", sdf.format(new java.util.Date()));\n  record.put(\"onlineTo\", sdf.format(new java.util.Date()));\n  record.put(\"quantity\", 1);\n  record.put(\"amount\", pricingRecord.Price.PriceSale);\n  pricerecords.add(record);\n}\npricebook.put(\"Prices\", pricerecords);\n\npricebooks.add(pricebook);\nroot.put(\"Pricebooks\", pricebooks);\ndict.put(\"Root\", root);\ndict.put(\"NO_DELETE\", true);",
      "desc" : "Script to execute",
      "name" : "script",
      "valueType" : 2,
      "secret" : false,
      "refId" : "61734d1c-1ff6-4a2b-a251-00f3bd76b9ed"
    } ],
    "jobId" : "735addb1-b858-402b-91f3-ec077f49bd6d",
    "name" : "Script Task",
    "key" : "Core::ScriptTask",
    "comment" : "prepare data for template engine.  Execute any business rule",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.ScriptTask",
    "enabled" : true,
    "desc" : "Task used to execute custom javascript",
    "refId" : "f5d44f40-cbd4-45fa-b45f-b062e546ad0f",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "6a9e08b2-92d5-41dc-ad8b-c6b25e0ebcf5",
    "ordinal" : 5,
    "taskParameters" : [ {
      "id" : "485203e1-ea4c-4dee-8b6c-7a08688d3dc7",
      "ordinal" : 1,
      "value" : "Root",
      "desc" : "Key name of input ",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "e2963db8-9c7d-4863-b1ec-7a1bf15dbd52"
    }, {
      "id" : "a02c095c-321d-443e-a462-60d0672ae317",
      "ordinal" : 2,
      "value" : "<#compress>\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<pricebooks xmlns=\"http://www.demandware.com/xml/impex/pricebook/2006-10-31\">\t\n\t<#list Pricebooks as pricebook>\n    <pricebook>\n        <header pricebook-id=\"${pricebook.priceBookId}\">\n            <currency>${pricebook.currency}</currency>\n            <online-flag>${pricebook.onlineFlag}</online-flag>\n        </header>\n        <price-tables>\n        \t<#list pricebook.Prices as price>\n            <price-table product-id=\"${price.productId}\">\n                <online-from>${price.onlineFrom}</online-from>\n                <online-to>${price.onlineTo}</online-to>\n                <amount quantity=\"${price.quantity}\">${price.amount}</amount>\n            </price-table>\n            </#list>\n        </price-tables>\n    </pricebook>\n    </#list>\n</pricebooks>\n</#compress>",
      "desc" : "Template to use",
      "name" : "template",
      "valueType" : 2,
      "secret" : false,
      "refId" : "ed2bc33b-2474-4c9f-a7bb-80183abe53cf"
    }, {
      "id" : "23b30485-d3c0-48ee-844f-da3ac5923b3a",
      "ordinal" : 3,
      "value" : "PricingFile",
      "desc" : "Key name of output ",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "be1f40ef-6389-4aa3-9124-4231b715107a"
    } ],
    "jobId" : "735addb1-b858-402b-91f3-ec077f49bd6d",
    "name" : "Freemarker Execute Task",
    "key" : "Core::FreemarkerExecuteTask",
    "comment" : "format to commerce cloud xml",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.FreemarkerExecuteTask",
    "enabled" : true,
    "desc" : "Task used to execute Freemarker template.",
    "refId" : "edb872f0-243b-46ea-9149-ca967fe766e7",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "c847c086-c361-4598-b598-0f4f1ba43eaa",
    "ordinal" : 6,
    "taskParameters" : [ {
      "id" : "99784dfd-6805-4f9c-a4fe-aee42fc9b816",
      "ordinal" : 1,
      "value" : "CCPricingFile",
      "desc" : "Left Hand Parameter (left of equal)",
      "name" : "leftParam",
      "valueType" : 0,
      "secret" : false,
      "refId" : "872220ae-b87f-4ee4-8f74-b818960e521f"
    }, {
      "id" : "c4167473-f65f-4d77-8341-22240a8e13c8",
      "ordinal" : 2,
      "value" : "${ var sdf = new java.text.SimpleDateFormat(\"yyyyMMdd'_'HHmmss\"); \"aptos-pricing-\" + sdf.format(new java.util.Date()) + \".xml\"; }",
      "desc" : "Right Hand Parameter (right of equal)  Can contain ${} that contains javascript",
      "name" : "rightParam",
      "valueType" : 2,
      "secret" : false,
      "refId" : "983f881a-9f10-43cc-9850-e913d2ad530a"
    } ],
    "jobId" : "735addb1-b858-402b-91f3-ec077f49bd6d",
    "name" : "Assign Task",
    "key" : "Core::AssignTask",
    "comment" : "create file name",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.AssignTask",
    "enabled" : true,
    "desc" : "Task used to Assign one key to another in the parameter dictionary",
    "refId" : "f749f807-bc45-4213-8db8-e66a8f263f44",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "66da32ee-1530-43cf-a942-db6cffda8101",
    "ordinal" : 7,
    "taskParameters" : [ {
      "id" : "9193d9f8-ccf0-4200-a1ea-11dd163a1ac7",
      "ordinal" : 1,
      "value" : "ftpuser",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "a68a11c6-cef6-4408-85f5-4f0728e8e3c7"
    }, {
      "id" : "993af6bf-7e62-4bc5-8e24-25e5b46708ca",
      "ordinal" : 2,
      "value" : "Cb6noRl93L3xieH1vfPSaA==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "a34fea04-c5b1-442c-975e-1655184f32f3"
    }, {
      "id" : "e11a86e0-982a-4e11-964a-0e8d02a82e7a",
      "ordinal" : 3,
      "value" : "ftps://demo.ignitiontransform.com/ignition/output/${CCPricingFile}",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "b102d706-66ce-4d8b-8944-ec8ba327b7b2"
    }, {
      "id" : "72be3bc6-4e6c-4fdc-9782-b94964d78fb7",
      "ordinal" : 4,
      "value" : "PricingFile",
      "desc" : "Key name of input file",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "06532b8a-daf2-457c-8c65-701e9cc0ec01"
    } ],
    "jobId" : "735addb1-b858-402b-91f3-ec077f49bd6d",
    "name" : "Upload File from Map",
    "key" : "Core::UploadFileFromMapTask",
    "comment" : "upload to ftps",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.UploadFileFromMapTask",
    "enabled" : true,
    "desc" : "Task used to upload a file to ftp, sftp, ftps, local or webdav from a map.",
    "refId" : "fb285dc7-59db-4382-b004-df6ee6147084",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "dc690887-7545-461e-ac8c-b641e7209173",
    "ordinal" : 8,
    "taskParameters" : [ {
      "id" : "4457620a-ebd1-418e-a20c-3a6350ab160a",
      "ordinal" : 1,
      "value" : "ftpuser",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "a68a11c6-cef6-4408-85f5-4f0728e8e3c7"
    }, {
      "id" : "9f3781c5-07eb-4870-8193-972666593b4b",
      "ordinal" : 2,
      "value" : "Cb6noRl93L3xieH1vfPSaA==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "a34fea04-c5b1-442c-975e-1655184f32f3"
    }, {
      "id" : "c109aee3-4078-445f-99c3-e54afbedf1c7",
      "ordinal" : 3,
      "value" : "ftps://demo.ignitiontransform.com/ignition/output/archive/${CCPricingFile}",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "b102d706-66ce-4d8b-8944-ec8ba327b7b2"
    }, {
      "id" : "eabad064-5478-47c0-b0ae-0b4eb6f4970f",
      "ordinal" : 4,
      "value" : "PricingFile",
      "desc" : "Key name of input file",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "06532b8a-daf2-457c-8c65-701e9cc0ec01"
    } ],
    "jobId" : "735addb1-b858-402b-91f3-ec077f49bd6d",
    "name" : "Upload File from Map",
    "key" : "Core::UploadFileFromMapTask",
    "comment" : "upload to archive",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.UploadFileFromMapTask",
    "enabled" : true,
    "desc" : "Task used to upload a file to ftp, sftp, ftps, local or webdav from a map.",
    "refId" : "fb285dc7-59db-4382-b004-df6ee6147084",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  } ],
  "desc" : "Demo transformation of Aptos Pricing to Commerce Cloud xml",
  "status" : "READY",
  "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_0020002f-d147-45c4-a56e-004f15b31c8d",
  "key" : "IC-00000002",
  "environment" : "STAGING"
}