{
  "id" : "25c62481-0566-4313-9bf4-723b03a39739",
  "name" : "Demo Aptos Pricing to Commerce Cloud",
  "enabled" : false,
  "tasks" : [ {
    "id" : "ae3779f2-5c81-4328-a1cc-b4f5cfb0537e",
    "ordinal" : 1,
    "taskParameters" : [ {
      "id" : "19848c03-9955-491c-aedb-bcf2c055b20d",
      "ordinal" : 1,
      "value" : "Test Client",
      "desc" : "Node to target",
      "name" : "node",
      "valueType" : 3,
      "secret" : false,
      "refId" : "b0b883bb-8c3d-439d-ad3c-f09a4bfe11c3"
    }, {
      "id" : "57bdd59b-12c3-48a3-b245-a9e55fe97b46",
      "ordinal" : 2,
      "value" : "/home/ftpuser/ignition/input/tnode/^aptos-products.xml$",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "49bfed33-b7ba-4fff-800c-03492846fcba"
    }, {
      "id" : "bd54c57f-1922-4f8e-96f6-3e647f95e3f7",
      "ordinal" : 3,
      "value" : "edit",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "a369a683-6183-4d0e-88e7-f39e79bbaca1"
    }, {
      "id" : "05311e73-316b-4bad-bdff-fea667e5afbe",
      "ordinal" : 4,
      "value" : "",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "d35b10ba-da27-436a-af85-1ecc45413347"
    }, {
      "id" : "2a646b5e-c0bd-432e-b6b2-39857e8a8b52",
      "ordinal" : 5,
      "value" : "AptosPricingFile",
      "desc" : "Output Key",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "958d3cc1-9f65-4a33-82f1-7b56f4fb0a97"
    } ],
    "name" : "Remote file to map task",
    "key" : "Core::NodeFileToMapTask",
    "comment" : "pickup file from node",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.NodeFileToMapTask",
    "enabled" : false,
    "desc" : "Copy file from remote to map.",
    "refId" : "4c4b17e1-3904-473c-8784-0b53212ad251",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "b99da87e-8046-4e6e-b8b7-8d0475ae63a2",
    "ordinal" : 2,
    "taskParameters" : [ {
      "id" : "f9abac2f-7a14-46c0-a123-41febd1e5f58",
      "ordinal" : 1,
      "value" : "!{ftpuser}",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "4f75fa01-c582-49aa-8f20-1b48462a8b28"
    }, {
      "id" : "2404636e-0307-453f-8808-3f85e5b6165a",
      "ordinal" : 2,
      "value" : "Mu+KttQ5jSnVA9I9kN9ebw==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "48fbf631-e014-45ee-a8eb-298ac7d1fa21"
    }, {
      "id" : "8d052fb7-3992-4026-81b3-c43c6ee946de",
      "ordinal" : 3,
      "value" : "!{ftpurl}/input/tnode/aptos-products.xml",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "45c250b3-72b5-4d81-a392-6ab7c6f5709d"
    }, {
      "id" : "1ee616de-c0c8-4cdd-b7db-fb2ca3f18d70",
      "ordinal" : 4,
      "value" : "AptosPricingFile",
      "desc" : "Key name of output file",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "201b77ea-8e35-4c3c-9f45-dd8afc123e10"
    } ],
    "name" : "Download File to Map Task",
    "key" : "Core::DownloadFileToMapTask",
    "comment" : "download file from ftps (debug)",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.DownloadFileToMapTask",
    "enabled" : true,
    "desc" : "Task used to download a file from FTP,SFTP,FTPS,Local and S3.",
    "refId" : "84211b05-40ce-4939-874d-825b983c3bda",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "208788bc-fc54-4095-980a-4d02ae634e13",
    "ordinal" : 3,
    "taskParameters" : [ {
      "id" : "14ca384c-e3cb-4f24-af67-56330d5a7e05",
      "ordinal" : 1,
      "value" : "AptosPricingFile",
      "desc" : "Key name of input file\n",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "33b71961-09fb-4f69-9df8-46721a14b8a4"
    }, {
      "id" : "8dce8cb3-14cd-4bb8-9400-b951af40206a",
      "ordinal" : 2,
      "value" : "AptosPricingMap",
      "desc" : "Key name to hold return value in dictionary",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "f1628808-0116-4d32-bff0-af0cb53d06b2"
    }, {
      "id" : "567f0973-15d5-445c-abf7-78987626cc25",
      "ordinal" : 4,
      "value" : "/Products/Product",
      "desc" : "Node to Break the row on",
      "name" : "rowIndicator",
      "valueType" : 0,
      "secret" : false,
      "refId" : "be88cc2e-5ba9-4277-a484-1d8146b78565"
    } ],
    "name" : "XML to Map Task",
    "key" : "Core::XmlToMapTask",
    "comment" : "get into map",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.XmlToMapTask",
    "enabled" : true,
    "desc" : "Task used to read xml file into the dictionary",
    "refId" : "4ca3d6e5-23fc-4d6a-beb2-09f0c9a5c2f3",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "7713c667-1060-455b-9df8-0ad7501d0b67",
    "ordinal" : 4,
    "taskParameters" : [ {
      "id" : "1ea0cf2d-c962-4564-8705-a06c2f700e1b",
      "ordinal" : 1,
      "value" : "var root = new java.util.HashMap();\nvar pricebooks = new java.util.ArrayList();\nvar pricebook = new java.util.HashMap();\npricebook.put(\"priceBookId\", \"listPrices\");\npricebook.put(\"currency\", \"USD\");\npricebook.put(\"onlineFlag\", \"true\");\nvar pricerecords = new java.util.ArrayList();\nvar sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss\");\n\nvar pricingIterator = new com.ignitioncommerce.transform.util.MapInFileIterator(dict.get('AptosPricingMap'));\nwhile (pricingIterator.hasNext()) {\n  var pricingRecord = pricingIterator.next();\n  var record = new java.util.HashMap();\n  record.put(\"productId\", pricingRecord.ProductID);\n  record.put(\"onlineFrom\", sdf.format(new java.util.Date()));\n  record.put(\"onlineTo\", sdf.format(new java.util.Date()));\n  record.put(\"quantity\", 1);\n  record.put(\"amount\", pricingRecord.Price.PriceSale);\n  pricerecords.add(record);\n}\npricebook.put(\"Prices\", pricerecords);\n\npricebooks.add(pricebook);\nroot.put(\"Pricebooks\", pricebooks);\ndict.put(\"Root\", root);",
      "desc" : "Script to execute",
      "name" : "script",
      "valueType" : 2,
      "secret" : false,
      "refId" : "61734d1c-1ff6-4a2b-a251-00f3bd76b9ed"
    } ],
    "name" : "Script Task",
    "key" : "Core::ScriptTask",
    "comment" : "prepare data for template engine.  Execute any business rule",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.ScriptTask",
    "enabled" : true,
    "desc" : "Task used to execute custom javascript",
    "refId" : "f5d44f40-cbd4-45fa-b45f-b062e546ad0f",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "71fed825-b954-4783-80ce-221bd6114035",
    "ordinal" : 5,
    "taskParameters" : [ {
      "id" : "39b2c0cb-d3eb-412d-bbf8-32e438d24037",
      "ordinal" : 1,
      "value" : "Root",
      "desc" : "Key name of input ",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "e2963db8-9c7d-4863-b1ec-7a1bf15dbd52"
    }, {
      "id" : "40ed8b7e-2eb0-45fc-9d1c-7d7b85b196ee",
      "ordinal" : 2,
      "value" : "<#compress>\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<pricebooks xmlns=\"http://www.demandware.com/xml/impex/pricebook/2006-10-31\">\t\n\t<#list Pricebooks as pricebook>\n    <pricebook>\n        <header pricebook-id=\"${pricebook.priceBookId}\">\n            <currency>${pricebook.currency}</currency>\n            <online-flag>${pricebook.onlineFlag}</online-flag>\n        </header>\n        <price-tables>\n        \t<#list pricebook.Prices as price>\n            <price-table product-id=\"${price.productId}\">\n                <online-from>${price.onlineFrom}</online-from>\n                <online-to>${price.onlineTo}</online-to>\n                <amount quantity=\"${price.quantity}\">${price.amount}</amount>\n            </price-table>\n            </#list>\n        </price-tables>\n    </pricebook>\n    </#list>\n</pricebooks>\n</#compress>",
      "desc" : "Template to use",
      "name" : "template",
      "valueType" : 2,
      "secret" : false,
      "refId" : "ed2bc33b-2474-4c9f-a7bb-80183abe53cf"
    }, {
      "id" : "54435949-5fb6-44f7-b81c-72d544970f8d",
      "ordinal" : 3,
      "value" : "PricingFile",
      "desc" : "Key name of output ",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "be1f40ef-6389-4aa3-9124-4231b715107a"
    } ],
    "name" : "Freemarker Execute Task",
    "key" : "Core::FreemarkerExecuteTask",
    "comment" : "format to commerce cloud xml",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.FreemarkerExecuteTask",
    "enabled" : true,
    "desc" : "Task used to execute Freemarker template.",
    "refId" : "edb872f0-243b-46ea-9149-ca967fe766e7",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "bf333354-53b4-4e07-9d77-0adbed6c4b2c",
    "ordinal" : 6,
    "taskParameters" : [ {
      "id" : "58b60d7a-d5a3-46a8-9353-6ee99915166d",
      "ordinal" : 1,
      "value" : "CCPricingFile",
      "desc" : "Left Hand Parameter (left of equal)",
      "name" : "leftParam",
      "valueType" : 0,
      "secret" : false,
      "refId" : "872220ae-b87f-4ee4-8f74-b818960e521f"
    }, {
      "id" : "02b2b66c-b11e-4ad8-b057-e40f1d75acd1",
      "ordinal" : 2,
      "value" : "${ var sdf = new java.text.SimpleDateFormat(\"yyyyMMdd'_'HHmmss\"); \"aptos-pricing-\" + sdf.format(new java.util.Date()) + \".xml\"; }",
      "desc" : "Right Hand Parameter (right of equal)  Can contain ${} that contains javascript",
      "name" : "rightParam",
      "valueType" : 2,
      "secret" : false,
      "refId" : "983f881a-9f10-43cc-9850-e913d2ad530a"
    } ],
    "name" : "Assign Task",
    "key" : "Core::AssignTask",
    "comment" : "create file name",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.AssignTask",
    "enabled" : true,
    "desc" : "Task used to Assign one key to another in the parameter dictionary",
    "refId" : "f749f807-bc45-4213-8db8-e66a8f263f44",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "9f981c1f-2d5b-489a-a870-78cff9b83275",
    "ordinal" : 7,
    "taskParameters" : [ {
      "id" : "8c101d65-56d1-4e2b-b883-afeaa8d2a15e",
      "ordinal" : 1,
      "value" : "ftpuser",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "a68a11c6-cef6-4408-85f5-4f0728e8e3c7"
    }, {
      "id" : "745165bc-09f3-42c0-a3d4-02c5f8e92eb9",
      "ordinal" : 2,
      "value" : "Cb6noRl93L3xieH1vfPSaA==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "a34fea04-c5b1-442c-975e-1655184f32f3"
    }, {
      "id" : "616d76d4-15b9-4346-97ab-cc7cd38f743a",
      "ordinal" : 3,
      "value" : "ftps://demo.ignitiontransform.com/ignition/output/${CCPricingFile}",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "b102d706-66ce-4d8b-8944-ec8ba327b7b2"
    }, {
      "id" : "b0c5710f-0ead-4b26-b841-5157efc4020c",
      "ordinal" : 4,
      "value" : "PricingFile",
      "desc" : "Key name of input file",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "06532b8a-daf2-457c-8c65-701e9cc0ec01"
    } ],
    "name" : "Upload File from Map",
    "key" : "Core::UploadFileFromMapTask",
    "comment" : "upload to ftps",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.UploadFileFromMapTask",
    "enabled" : true,
    "desc" : "Task used to upload a file to ftp, sftp, ftps, local or webdav from a map.",
    "refId" : "fb285dc7-59db-4382-b004-df6ee6147084",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "4e8a3f43-b268-4ba2-9d92-c28e7ae0217c",
    "ordinal" : 8,
    "taskParameters" : [ {
      "id" : "2ef75cbb-f459-4b9a-9edf-ed9cce9e7908",
      "ordinal" : 1,
      "value" : "ftpuser",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "a68a11c6-cef6-4408-85f5-4f0728e8e3c7"
    }, {
      "id" : "dac5b6f2-044f-403f-b92e-ff4a757749d2",
      "ordinal" : 2,
      "value" : "Cb6noRl93L3xieH1vfPSaA==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "a34fea04-c5b1-442c-975e-1655184f32f3"
    }, {
      "id" : "a5079298-7bc6-4058-8362-6405d773ded2",
      "ordinal" : 3,
      "value" : "ftps://demo.ignitiontransform.com/ignition/output/archive/${CCPricingFile}",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "b102d706-66ce-4d8b-8944-ec8ba327b7b2"
    }, {
      "id" : "cb85c2ac-b47c-4d95-89c7-462cd1cef0b6",
      "ordinal" : 4,
      "value" : "PricingFile",
      "desc" : "Key name of input file",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "06532b8a-daf2-457c-8c65-701e9cc0ec01"
    } ],
    "name" : "Upload File from Map",
    "key" : "Core::UploadFileFromMapTask",
    "comment" : "upload to archive",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.UploadFileFromMapTask",
    "enabled" : true,
    "desc" : "Task used to upload a file to ftp, sftp, ftps, local or webdav from a map.",
    "refId" : "fb285dc7-59db-4382-b004-df6ee6147084",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  } ],
  "desc" : "Demo transformation of Aptos Pricing to Commerce Cloud xml",
  "status" : "READY",
  "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_0020002f-d147-45c4-a56e-004f15b31c8d",
  "key" : "IC-00000003",
  "environment" : "STAGING"
}