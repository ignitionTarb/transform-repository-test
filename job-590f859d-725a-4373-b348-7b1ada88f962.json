{
  "id" : "590f859d-725a-4373-b348-7b1ada88f962",
  "name" : "Demo Aptos Inventory to Commerce Cloud",
  "enabled" : false,
  "tasks" : [ {
    "id" : "73bbf8c7-003f-47f6-a26c-9bffb25d1182",
    "ordinal" : 1,
    "taskParameters" : [ {
      "id" : "0e733e73-2687-4a49-a546-8814d16f429d",
      "ordinal" : 1,
      "value" : "!{ftpuser}",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "4f75fa01-c582-49aa-8f20-1b48462a8b28"
    }, {
      "id" : "11858d1e-7241-4176-be3f-38d4ece516bc",
      "ordinal" : 2,
      "value" : "Mu+KttQ5jSnVA9I9kN9ebw==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "48fbf631-e014-45ee-a8eb-298ac7d1fa21"
    }, {
      "id" : "9ace65bf-1721-4cd8-a1d6-4bd254742b95",
      "ordinal" : 3,
      "value" : "!{ftpurl}/input/aptos-inventory.xml",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "45c250b3-72b5-4d81-a392-6ab7c6f5709d"
    }, {
      "id" : "238ae6fb-a4ef-43ef-951c-1e3bb23b6d28",
      "ordinal" : 4,
      "value" : "AptosInventoryFile",
      "desc" : "Key name of output file",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "201b77ea-8e35-4c3c-9f45-dd8afc123e10"
    } ],
    "job" : {
      "id" : "590f859d-725a-4373-b348-7b1ada88f962",
      "name" : "Demo Aptos Inventory to Commerce Cloud",
      "enabled" : false,
      "desc" : "Demo transformation of Aptos inventory API to Commerce Cloud Xml",
      "status" : "READY",
      "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_e2a3ed17-d4af-4375-bbf4-50967c0b25c5",
      "key" : "IC-00000001",
      "environment" : "STAGING"
    },
    "name" : "Download File to Map Task",
    "key" : "Core::DownloadFileToMapTask",
    "comment" : "Pull down file from ftp server.",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.DownloadFileToMapTask",
    "enabled" : true,
    "desc" : "Task used to download a file from FTP,SFTP,FTPS,Local and S3.",
    "refId" : "84211b05-40ce-4939-874d-825b983c3bda",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "47c134bd-44a4-46ff-aace-27d8244f6053",
    "ordinal" : 2,
    "taskParameters" : [ {
      "id" : "558317ce-4198-40d3-a4a5-56fb649724ba",
      "ordinal" : 1,
      "value" : "AptosInventoryFile",
      "desc" : "Key name of input file\n",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "33b71961-09fb-4f69-9df8-46721a14b8a4"
    }, {
      "id" : "c3a16d50-e98d-4a35-be0c-8caa53d3b32f",
      "ordinal" : 2,
      "value" : "AptosInventoryMap",
      "desc" : "Key name to hold return value in dictionary",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "f1628808-0116-4d32-bff0-af0cb53d06b2"
    }, {
      "id" : "5bdf2520-3a70-4d83-96ce-d26fc718b62d",
      "ordinal" : 4,
      "value" : "/ProductsInventory/ProductInventory",
      "desc" : "Node to Break the row on",
      "name" : "rowIndicator",
      "valueType" : 0,
      "secret" : false,
      "refId" : "be88cc2e-5ba9-4277-a484-1d8146b78565"
    } ],
    "job" : {
      "id" : "590f859d-725a-4373-b348-7b1ada88f962",
      "name" : "Demo Aptos Inventory to Commerce Cloud",
      "enabled" : false,
      "desc" : "Demo transformation of Aptos inventory API to Commerce Cloud Xml",
      "status" : "READY",
      "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_e2a3ed17-d4af-4375-bbf4-50967c0b25c5",
      "key" : "IC-00000001",
      "environment" : "STAGING"
    },
    "name" : "XML to Map Task",
    "key" : "Core::XmlToMapTask",
    "comment" : "Convert Aptos inventory file to a map",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.XmlToMapTask",
    "enabled" : true,
    "desc" : "Task used to read xml file into the dictionary",
    "refId" : "4ca3d6e5-23fc-4d6a-beb2-09f0c9a5c2f3",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "4ed0a66f-250e-4048-8333-d3c51e6ed775",
    "ordinal" : 3,
    "taskParameters" : [ {
      "id" : "872c5590-b9ca-42e5-880d-7372bd1b75e2",
      "ordinal" : 1,
      "value" : "var inDebug = dict.inDebug; \nload('!{ThisHost}/js/global.js');\n\n// setup a formatter\nvar sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss\");\n// Create an output map\nvar root = new java.util.HashMap();\n// List of Inventory.  (we only have 1 in this example)\nvar inventoryLists = new java.util.ArrayList();\n// Our inventory list and it's values.\nvar inventoryList = new java.util.HashMap();\ninventoryList.put(\"listId\", \"inventory\");\ninventoryList.put(\"defaultInStock\", \"true\");\ninventoryList.put(\"description\", \"Main Inventory\");\ninventoryList.put(\"useBundleOnly\", \"false\");\ninventoryList.put(\"onOrder\", \"false\");\nvar inventoryRecords = new java.util.ArrayList();\n\n// Read our inventory records 1 at a time\nvar inventoryIterator = new com.ignitioncommerce.transform.util.MapInFileIterator(dict.get('AptosInventoryMap'));\nwhile (inventoryIterator.hasNext()) {\n  var inventoryRecord = inventoryIterator.next();\n  var record = new java.util.HashMap();\n  record.put(\"productId\", inventoryRecord.ProductPartNo);\n  record.put(\"allocation\", inventoryRecord.ProductQuantity);\n  record.put(\"timestamp\", sdf.format(new java.util.Date()));\n  record.put(\"perpetual\", \"false\");\n  record.put(\"backOrderHandling\", \"backorder\");\n  record.put(\"ats\", inventoryRecord.ProductQuantity);\n  record.put(\"onOrder\", \"false\");\n  record.put(\"turnover\", \"false\");\n  inventoryRecords.add(record);  \n}\ninventoryList.put(\"Products\", inventoryRecords);\ninventoryLists.add(inventoryList);\nroot.put(\"InventoryLists\", inventoryLists);\n// Root is just a reference to the \"ROOT\" map in Freemarker\ndict.put('Root', root);\n",
      "desc" : "Script to execute",
      "name" : "script",
      "valueType" : 2,
      "secret" : false,
      "refId" : "61734d1c-1ff6-4a2b-a251-00f3bd76b9ed"
    } ],
    "job" : {
      "id" : "590f859d-725a-4373-b348-7b1ada88f962",
      "name" : "Demo Aptos Inventory to Commerce Cloud",
      "enabled" : false,
      "desc" : "Demo transformation of Aptos inventory API to Commerce Cloud Xml",
      "status" : "READY",
      "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_e2a3ed17-d4af-4375-bbf4-50967c0b25c5",
      "key" : "IC-00000001",
      "environment" : "STAGING"
    },
    "name" : "Script Task",
    "key" : "Core::ScriptTask",
    "comment" : "Prepare data by executing any client specific logic and setting up for template engine",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.ScriptTask",
    "enabled" : true,
    "desc" : "Task used to execute custom javascript",
    "refId" : "f5d44f40-cbd4-45fa-b45f-b062e546ad0f",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "a294d2f4-b952-40ad-8b45-7a7fa5481afa",
    "ordinal" : 4,
    "taskParameters" : [ {
      "id" : "d7057031-846d-42ea-8238-f1b71968091a",
      "ordinal" : 1,
      "value" : "Root",
      "desc" : "Key name of input ",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "e2963db8-9c7d-4863-b1ec-7a1bf15dbd52"
    }, {
      "id" : "36824375-c699-4930-a8fe-28cc04bb94d9",
      "ordinal" : 2,
      "value" : "<#compress>\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<inventory xmlns=\"http://www.demandware.com/xml/impex/inventory/2007-05-31\">\n\t<#list InventoryLists as InventoryList>\n    <inventory-list>\n        <header list-id=\"${InventoryList.listId}\">\n            <default-instock>${InventoryList.defaultInStock}</default-instock>\n            <description>${InventoryList.description}</description>\n            <use-bundle-inventory-only>${InventoryList.useBundleOnly}</use-bundle-inventory-only>\n            <on-order>${InventoryList.onOrder}</on-order>\n        </header>\n        <records>\n        \t<#list InventoryList.Products as Product>\n            <record product-id=\"${Product.productId}\">\n                <allocation>${Product.allocation}</allocation>\n                <allocation-timestamp>${Product.timestamp}</allocation-timestamp>\n                <perpetual>${Product.perpetual}</perpetual>\n                <preorder-backorder-handling>${Product.backOrderHandling}</preorder-backorder-handling>\n                <ats>${Product.ats}</ats>\n                <on-order>${Product.onOrder}</on-order>\n                <turnover>${Product.turnover}</turnover>\n            </record>\n            </#list>\n        </records>\n    </inventory-list>\n    </#list>\n</inventory>\n</#compress>\n",
      "desc" : "Template to use",
      "name" : "template",
      "valueType" : 2,
      "secret" : false,
      "refId" : "ed2bc33b-2474-4c9f-a7bb-80183abe53cf"
    }, {
      "id" : "93c8dcce-27e9-45c2-a66b-532a9fe81a00",
      "ordinal" : 3,
      "value" : "InventoryFile",
      "desc" : "Key name of output ",
      "name" : "outputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "be1f40ef-6389-4aa3-9124-4231b715107a"
    } ],
    "job" : {
      "id" : "590f859d-725a-4373-b348-7b1ada88f962",
      "name" : "Demo Aptos Inventory to Commerce Cloud",
      "enabled" : false,
      "desc" : "Demo transformation of Aptos inventory API to Commerce Cloud Xml",
      "status" : "READY",
      "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_e2a3ed17-d4af-4375-bbf4-50967c0b25c5",
      "key" : "IC-00000001",
      "environment" : "STAGING"
    },
    "name" : "Freemarker Execute Task",
    "key" : "Core::FreemarkerExecuteTask",
    "comment" : "Format to Commerce Cloud xml",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.FreemarkerExecuteTask",
    "enabled" : true,
    "desc" : "Task used to execute Freemarker template.",
    "refId" : "edb872f0-243b-46ea-9149-ca967fe766e7",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "1dc51ccd-37b0-44e0-8cc7-d7655eed3aaa",
    "ordinal" : 5,
    "taskParameters" : [ {
      "id" : "da95944e-ef43-44e7-a741-1427e1a9b370",
      "ordinal" : 1,
      "value" : "CCInventoryFile",
      "desc" : "Left Hand Parameter (left of equal)",
      "name" : "leftParam",
      "valueType" : 0,
      "secret" : false,
      "refId" : "872220ae-b87f-4ee4-8f74-b818960e521f"
    }, {
      "id" : "e0707a85-35b1-4be3-a2e5-9ae687dad238",
      "ordinal" : 2,
      "value" : "${ var sdf = new java.text.SimpleDateFormat(\"yyyyMMdd'_'HHmmss\"); \"aptos-inventory-\" + sdf.format(new java.util.Date()) + \".xml\"; }",
      "desc" : "Right Hand Parameter (right of equal)  Can contain ${} that contains javascript",
      "name" : "rightParam",
      "valueType" : 2,
      "secret" : false,
      "refId" : "983f881a-9f10-43cc-9850-e913d2ad530a"
    } ],
    "job" : {
      "id" : "590f859d-725a-4373-b348-7b1ada88f962",
      "name" : "Demo Aptos Inventory to Commerce Cloud",
      "enabled" : false,
      "desc" : "Demo transformation of Aptos inventory API to Commerce Cloud Xml",
      "status" : "READY",
      "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_e2a3ed17-d4af-4375-bbf4-50967c0b25c5",
      "key" : "IC-00000001",
      "environment" : "STAGING"
    },
    "name" : "Assign Task",
    "key" : "Core::AssignTask",
    "comment" : "Setup file name",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.AssignTask",
    "enabled" : true,
    "desc" : "Task used to Assign one key to another in the parameter dictionary",
    "refId" : "f749f807-bc45-4213-8db8-e66a8f263f44",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "b4399edc-014e-426c-9883-4ae04bacc5c7",
    "ordinal" : 6,
    "taskParameters" : [ {
      "id" : "7e2151c6-459c-4126-ab6f-22fd5013088b",
      "ordinal" : 1,
      "value" : "!{ftpuser}",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "a68a11c6-cef6-4408-85f5-4f0728e8e3c7"
    }, {
      "id" : "fab68295-9ed5-4b92-a19a-4d41a68d8b0e",
      "ordinal" : 2,
      "value" : "Mu+KttQ5jSnVA9I9kN9ebw==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "a34fea04-c5b1-442c-975e-1655184f32f3"
    }, {
      "id" : "b5302fb0-f9f8-4c71-90ed-d88bf1c8dca4",
      "ordinal" : 3,
      "value" : "!{ftpurl}/output/${CCInventoryFile}",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "b102d706-66ce-4d8b-8944-ec8ba327b7b2"
    }, {
      "id" : "a39911e7-f095-49c4-bbfd-a35202053c48",
      "ordinal" : 4,
      "value" : "InventoryFile",
      "desc" : "Key name of input file",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "06532b8a-daf2-457c-8c65-701e9cc0ec01"
    } ],
    "job" : {
      "id" : "590f859d-725a-4373-b348-7b1ada88f962",
      "name" : "Demo Aptos Inventory to Commerce Cloud",
      "enabled" : false,
      "desc" : "Demo transformation of Aptos inventory API to Commerce Cloud Xml",
      "status" : "READY",
      "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_e2a3ed17-d4af-4375-bbf4-50967c0b25c5",
      "key" : "IC-00000001",
      "environment" : "STAGING"
    },
    "name" : "Upload File from Map",
    "key" : "Core::UploadFileFromMapTask",
    "comment" : "Upload inventory file to output directory",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.UploadFileFromMapTask",
    "enabled" : true,
    "desc" : "Task used to upload a file to ftp, sftp, ftps, local or webdav from a map.",
    "refId" : "fb285dc7-59db-4382-b004-df6ee6147084",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  }, {
    "id" : "89896c5a-b7e1-4bc1-9efa-1431d6f5eb56",
    "ordinal" : 7,
    "taskParameters" : [ {
      "id" : "b1b6d777-9d7c-48f4-b2c3-e8f2fe564081",
      "ordinal" : 1,
      "value" : "!{ftpuser}",
      "desc" : "User to login to ftp",
      "name" : "user",
      "valueType" : 0,
      "secret" : false,
      "refId" : "a68a11c6-cef6-4408-85f5-4f0728e8e3c7"
    }, {
      "id" : "370d5122-1fe4-4a86-b259-a9d3e2ee8449",
      "ordinal" : 2,
      "value" : "Mu+KttQ5jSnVA9I9kN9ebw==",
      "desc" : "Password to login to ftp",
      "name" : "password",
      "valueType" : 0,
      "secret" : true,
      "refId" : "a34fea04-c5b1-442c-975e-1655184f32f3"
    }, {
      "id" : "1b40f772-9449-4351-a0af-e1f1f7bb614b",
      "ordinal" : 3,
      "value" : "!{ftpurl}/output/archive/${CCInventoryFile}",
      "desc" : "Url to file",
      "name" : "url",
      "valueType" : 0,
      "secret" : false,
      "refId" : "b102d706-66ce-4d8b-8944-ec8ba327b7b2"
    }, {
      "id" : "789f4bb7-3af6-4dc3-afbe-f21335a5748d",
      "ordinal" : 4,
      "value" : "InventoryFile",
      "desc" : "Key name of input file",
      "name" : "inputKey",
      "valueType" : 0,
      "secret" : false,
      "refId" : "06532b8a-daf2-457c-8c65-701e9cc0ec01"
    } ],
    "job" : {
      "id" : "590f859d-725a-4373-b348-7b1ada88f962",
      "name" : "Demo Aptos Inventory to Commerce Cloud",
      "enabled" : false,
      "desc" : "Demo transformation of Aptos inventory API to Commerce Cloud Xml",
      "status" : "READY",
      "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_e2a3ed17-d4af-4375-bbf4-50967c0b25c5",
      "key" : "IC-00000001",
      "environment" : "STAGING"
    },
    "name" : "Upload File from Map",
    "key" : "Core::UploadFileFromMapTask",
    "comment" : "Upload inventory file to an archive location",
    "clazz" : "com.ignitioncommerce.transform.tasks.core.UploadFileFromMapTask",
    "enabled" : true,
    "desc" : "Task used to upload a file to ftp, sftp, ftps, local or webdav from a map.",
    "refId" : "fb285dc7-59db-4382-b004-df6ee6147084",
    "clazzType" : "Java",
    "childTasks" : [ ],
    "hasSubTask" : false,
    "stopOnError" : true,
    "reportOnError" : true
  } ],
  "desc" : "Demo transformation of Aptos inventory API to Commerce Cloud Xml",
  "status" : "READY",
  "snsARN" : "arn:aws:sns:us-east-1:194810246581:Ignition_Job_e2a3ed17-d4af-4375-bbf4-50967c0b25c5",
  "key" : "IC-00000001",
  "environment" : "STAGING"
}